---
version: '1.0'

description: A workflow to process an github deployment event and install a pack if the environment matches.

input:
  - Group_Name
  - Location
  - VM_Name

tasks:
  create_vm:
      action: stackstrom_azure.vm_create Group_Name=<% ctx(Group_Name) %> Location=<% ctx(Location) %> VM_Name=<% ctx(VM_Name) %>
      next:
      - when: <% succeeded() %>
          publish:
          - stdout: <% result().stdout %>
          - stderr: <% result().stderr %>

output:
- stdout: <% ctx(stdout) %>